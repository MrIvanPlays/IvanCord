From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Ivan Pekov <ivan@mrivanplays.com>
Date: Thu, 21 Oct 2021 19:49:21 +0300
Subject: [PATCH] Friendlier snapshot support

This adds a helper method to create snapshot protocol versions. This patch
also updates from 21w40a to 21w41a, with also updating packet ids for
the packets IvanCord adds. I cba to add them into their proper patches as of
right now.

diff --git a/protocol/src/main/java/net/md_5/bungee/protocol/ProtocolConstants.java b/protocol/src/main/java/net/md_5/bungee/protocol/ProtocolConstants.java
index bb37ba04fbc920e515251a4482f78a10993fcbab..d473bbbecc7f0ae3d016f369d0c376251c322660 100644
--- a/protocol/src/main/java/net/md_5/bungee/protocol/ProtocolConstants.java
+++ b/protocol/src/main/java/net/md_5/bungee/protocol/ProtocolConstants.java
@@ -36,7 +36,7 @@ public class ProtocolConstants
     public static final int MINECRAFT_1_16_4 = 754;
     public static final int MINECRAFT_1_17 = 755;
     public static final int MINECRAFT_1_17_1 = 756;
-    public static final int MINECRAFT_1_18 = 1073741868;
+    public static final int MINECRAFT_1_18 = getProtocolFromSnapshotProtocol( 46 ); // IvanCord - 21w42a, future protocol: 757
     public static final List<String> SUPPORTED_VERSIONS;
     public static final List<Integer> SUPPORTED_VERSION_IDS;
 
@@ -96,6 +96,15 @@ public class ProtocolConstants
         SUPPORTED_VERSION_IDS = supportedVersionIds.build();
     }
 
+    // IvanCord start - friendlier snapshot version support
+    private static final int SNAPSHOT_BIT = 30;
+
+    private static int getProtocolFromSnapshotProtocol(int snapshotVersion)
+    {
+        return ( 1 << SNAPSHOT_BIT ) | snapshotVersion;
+    }
+    // IvanCord end
+
     public static final boolean isBeforeOrEq(int before, int other)
     {
             return before <= other;
